(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41da62cb"],{3213:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.topic?n("div",[n("Panel",{attrs:{width:800},scopedSlots:t._u([{key:"content",fn:function(){return[n("h2",[t._v(" "+t._s(t.topic.title)+" ")]),n("div",{staticClass:"coll"},[n("el-button",{staticClass:"collect",attrs:{type:"success"},on:{click:t.collect}},[t._v(" "+t._s(t.topic.is_collect?"取消收藏":"收藏")+" ")])],1),n("hr"),n("div",{domProps:{innerHTML:t._s(t.topic.content)}})]},proxy:!0}],null,!1,398258261)}),n("br"),n("Panel",{attrs:{width:800},scopedSlots:t._u([{key:"header",fn:function(){return[n("span",[t._v(t._s(t.topic.replies.length)+" 评论")])]},proxy:!0},{key:"content",fn:function(){return[n("div",[t._l(t.topic.replies,(function(e,r){return n("div",{key:e.id},[n("hr"),n("img",{attrs:{width:"30px",src:e.author.avatar_url,alt:""}}),n("span",{staticStyle:{"font-weight":"700"}},[t._v(" "+t._s(e.author.loginname)+" ")]),n("span",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(r+1)+" 楼 ")]),n("div",{domProps:{innerHTML:t._s(e.content)}}),t.isLogin?n("el-button",{class:{"up-active":e.is_uped},attrs:{size:"mini",type:"success",icon:"el-icon-thumb",circle:""},on:{click:function(n){return t.upClick(e.id)}}},[t._v(t._s(e.ups.length?e.ups.length:""))]):t._e(),t._v(" "),t.isLogin?n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.otherSubmit(e)}}},[t._v("回复")]):t._e(),e.id===t.reply_id?n("div",[n("br"),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply_text,expression:"reply_text"}],ref:"textarea",refInFor:!0,domProps:{value:t.reply_text},on:{input:function(e){e.target.composing||(t.reply_text=e.target.value)}}}),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.otherSubmit1(e.id)}}},[t._v("回复")])],1):t._e()],1)})),n("br"),n("hr"),n("br"),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.text,expression:"text",modifiers:{lazy:!0}}],domProps:{value:t.text},on:{change:function(e){t.text=e.target.value}}}),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:t.submit}},[t._v("回复")])],1)],2)]},proxy:!0}],null,!1,4012305188)})],1):n("div",[t._v("文章获取中...")])},i=[],c=n("1da1"),o=(n("7db0"),n("a434"),n("96cf"),n("89d7")),a={components:{Panel:o["a"]},name:"Topic",data:function(){return{topic:null,text:"",reply_id:"",reply_text:""}},computed:{isLogin:function(){return!0}},created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,r,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.topicId,r=!0,i=r?"/topic/".concat(n,"?accesstoken=9480c067-208c-4614-8876-98302830ec54"):"/topic/".concat(n),e.next=5,t.$axios.get(i);case 5:c=e.sent,t.topic=c.data;case 7:case"end":return e.stop()}}),e)})))()},methods:{upClick:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.post("/reply/".concat(t,"/ups"),{accesstoken:"9480c067-208c-4614-8876-98302830ec54"});case 2:r=n.sent,i="608814534d20cb687768f16b",c=e.topic.replies.find((function(e){return e.id===t})),c.is_uped="up"===r.action,"up"===r.action?c.ups.push(i):c.ups.splice(c.ups.indexOf(i),1);case 7:case"end":return n.stop()}}),n)})))()},submit:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.text,!n){e.next=8;break}return e.next=4,t.$axios.post("/topic/".concat(t.topic.id,"/replies"),{accesstoken:"9480c067-208c-4614-8876-98302830ec54",content:n});case 4:r=e.sent,i={id:r.reply_id,is_uped:!1,ups:[],content:"<p>".concat(n,"</p>"),author:{avatar_url:"https://avatars.githubusercontent.com/u/79734815?v=4&s=120",loginname:" pengwu001 "}},t.topic.replies.push(i),t.text="";case 8:case"end":return e.stop()}}),e)})))()},otherSubmit:function(t){var e=t.id,n=t.author;this.reply_id=e,this.reply_text="@".concat(n.loginname," "),this.$nextTick((function(){this.$refs.textarea[0].focus()}))},otherSubmit1:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.reply_text,n.next=3,e.$axios.post("/topic/".concat(e.topic.id,"/replies"),{accesstoken:"9480c067-208c-4614-8876-98302830ec54",content:r,reply_id:t});case 3:i=n.sent,c={id:i.reply_id,is_uped:!1,ups:[],content:"<p>".concat(r,"</p>"),author:{avatar_url:"https://avatars.githubusercontent.com/u/79734815?v=4&s=120",loginname:" pengwu001 "}},e.topic.replies.push(c),e.reply_text="",e.reply_id="";case 8:case"end":return n.stop()}}),n)})))()},collect:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,r,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.topic,r=n.is_collect,i=n.id,c="9480c067-208c-4614-8876-98302830ec54",!r){e.next=8;break}return e.next=5,t.$axios.post("/topic_collect/de_collect",{topic_id:i,accesstoken:c});case 5:t.topic.is_collect=!1,e.next=11;break;case 8:return e.next=10,t.$axios.post("/topic_collect/collect",{topic_id:i,accesstoken:c});case 10:t.topic.is_collect=!0;case 11:case"end":return e.stop()}}),e)})))()}}},s=a,u=(n("a092"),n("2877")),p=Object(u["a"])(s,r,i,!1,null,null,null);e["default"]=p.exports},"7b61":function(t,e,n){},"7db0":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").find,c=n("44d2"),o="find",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),c(o)},a092:function(t,e,n){"use strict";n("7b61")},a434:function(t,e,n){"use strict";var r=n("23e7"),i=n("23cb"),c=n("a691"),o=n("50c4"),a=n("7b0b"),s=n("65f0"),u=n("8418"),p=n("1dde"),l=p("splice"),d=Math.max,f=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,r,p,l,m,_,x=a(this),b=o(x.length),g=i(t,b),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=b-g):(n=y-2,r=f(d(c(e),0),b-g)),b+n-r>h)throw TypeError(v);for(p=s(x,r),l=0;l<r;l++)m=g+l,m in x&&u(p,l,x[m]);if(p.length=r,n<r){for(l=g;l<b-r;l++)m=l+r,_=l+n,m in x?x[_]=x[m]:delete x[_];for(l=b;l>b-r+n;l--)delete x[l-1]}else if(n>r)for(l=b-r;l>g;l--)m=l+r-1,_=l+n-1,m in x?x[_]=x[m]:delete x[_];for(l=0;l<n;l++)x[l+g]=arguments[l+2];return x.length=b-r+n,p}})}}]);
//# sourceMappingURL=chunk-41da62cb.a3b2f611.js.map